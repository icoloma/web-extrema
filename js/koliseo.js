$(function(){window.Koliseo=window.Koliseo||{},Koliseo.resources={en:{ticketsAvailable:"tickets available",seeOther:"see other dates",empty:"There are no performances scheduled for this event.",dateFormat:"Ddd Mm* d* h*:mm a.m",weekStart:0,weekDays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday",months:"January February March April May June July August September October November December"},es:{ticketsAvailable:"de entradas disponibles",seeOther:"ver otras fechas",empty:"No hay actuaciones programadas para este evento.",dateFormat:"Ddd d* de Mm* HH:mm",weekStart:1,weekDays:"Domingo Lunes Martes Miércoles Jueves Viernes Sábado",months:"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre"},it:{ticketsAvailable:"biglietti disponibili",seeOther:"vedi altre date",empty:"Nessuno spettacolo trovato",dateFormat:"Ddd Mm* d*",weekDays:"Domenica Lunedì Martedì Mercoledì Giovedì Venerdì Sabato",months:"Gennaio Febbraio Marzo Aprile Maggio Giugno Luglio Agosto Settembre Ottobre Novembre Dicembre"}};var e=Koliseo.resources[currentLang],a=function(e){return(r()?document.location.protocol:"https:")+"//www.koliseo.com/"+e},t=2,r=function(){return navigator.userAgent.match(/.+MSIE [89]\.0.+/)},s=function(e){return+(100*e).toFixed(0)},o=function(a,t){var r=new Date(t),s=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/.exec(t),o=s[1],c=s[2],i=s[3],n=s[4],l=String(Number(n)%12?Number(n)%12:12),d=Number(n)<12?!0:!1,p=s[5],u=e.months.split(" ")[c-1],m=e.weekDays.split(" ")[r.getUTCDay()],g=function(e){e=String(e);var a="00";return a.substring(0,a.length-e.length)+e};return a.replace(/yyyy/g,o).replace(/yy/g,o.substr(2,2)).replace(/MMM/g,u.substr(0,3).toUpperCase()).replace(/Mmm/g,u.substr(0,3)).replace(/MM\*/g,u.toUpperCase()).replace(/Mm\*/g,u).replace(/mM/g,g(c)).replace(/DDD/g,m.substr(0,3).toUpperCase()).replace(/Ddd/g,m.substr(0,3)).replace(/DD\*/g,m.toUpperCase()).replace(/Dd\*/g,m).replace(/dd/g,g(i)).replace(/d\*/g,i).replace(/HH/g,g(n)).replace(/H\*/g,n).replace(/hh/g,g(l)).replace(/h\*/g,l).replace(/mm/g,g(p)).replace(/AM/g,d?"AM":"PM").replace(/am/g,d?"am":"pm").replace(/A\.M/g,d?"A.M.":"P.M.").replace(/a\.m/g,d?"a.m.":"p.m.")},c=function(r,c){var i=$(c),n=i.data("eventUuid");$.ajax({url:a(n)+"/performances",data:{minDate:(new Date).valueOf(),pageSize:100},dataType:"json",type:"GET",success:function(r){var c=$.makeArray(r.data),n=$('<ul class="kperformances">'),l=c.length,d=function(r){$.each(c.slice(r*t,r*t+t),function(t,r){var c=r.totalTickets-r.soldTickets,i=s(c/r.totalTickets),l=0===i?"kticket-soldout":20>i?"kticket-danger":40>i?"kticket-warning":"kticket-ok";n.append($('<li><p class="kperformance" title="'+i+"% "+e.ticketsAvailable+'"><a class="kperflink '+l+(0===i?" disabled":"")+'" href="'+a(r.event.uuid)+"?selected="+r.id+'" target="_blank"><b class="kperfdate">'+o(e.dateFormat,r.dateTimeStr)+"</b> "+c+"/"+r.totalTickets+'<span class="kicon-ticket"></span>  <span class="kprice">'+r.minPrice+" "+r.currency+'</span> </a><span class="kaddr">'+r.address+"</span></p></li>"))}),i.html(n),i.append('<div class="kcontrols">'+(r>0?'<a class="js-kcontrol left" data-page="'+(r-1)+'">&laquo; Previous</a>':"")+(l-t*r>t?'<a class="js-kcontrol right" data-page="'+(r+1)+'">Next &raquo;</a>':"")+"</div>"),i.click(".js-kcontrol",function(e){var a=$(e.target);d(+a.data("page"))})};d(0)}})};$(".kcontainer").each(c)});